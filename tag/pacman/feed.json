{
    "version": "https://jsonfeed.org/version/1",
    "title": "MAXshiro's Blog • All posts by \"pacman\" tag",
    "description": "Discover and Record the world.",
    "home_page_url": "http://maxshiroi.top",
    "items": [
        {
            "id": "http://maxshiroi.top/ug/140206/",
            "url": "http://maxshiroi.top/ug/140206/",
            "title": "Arch安装使用指导",
            "date_published": "2023-02-24T06:02:06.000Z",
            "content_html": "<h1 id=\"前期准备\"><a class=\"markdownIt-Anchor\" href=\"#前期准备\">#</a> 前期准备</h1>\n<p>在创建好虚拟机后，需要打开虚拟机设置，将  <code>firmware type</code>  更改为  <code>efi</code> ，以便后续操作。</p>\n<h1 id=\"检查网络设置和-ssh-连接\"><a class=\"markdownIt-Anchor\" href=\"#检查网络设置和-ssh-连接\">#</a> 检查网络设置和 SSH 连接</h1>\n<p>以下是检查网络设置和 SSH 连接的操作步骤：</p>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\"># 检查系统启动方式\nls /sys/firmware/efi/efivars\n\n# 检查网络是否通畅\nping baidu.com\n\n# 更改密码并远程连接\npasswd\n\n# 查看 IP 地址\nip addr<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"使用ssh连接\"><a class=\"markdownIt-Anchor\" href=\"#使用ssh连接\">#</a> 使用 ssh 连接</h1>\n<pre class=\"line-numbers language-cmd\" data-language=\"cmd\"><div class=\"caption\"><span>cmd</span></div><code class=\"language-cmd\">ssh -p 22 root@192.168.204.130<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h1 id=\"分区挂载\"><a class=\"markdownIt-Anchor\" href=\"#分区挂载\">#</a> 分区挂载</h1>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\"># 查看已存在的硬盘\nlsblk\n# 使用cfdisk创建分区\ncfdisk /dev/nvme0n1\n# 创建如下三个\nDevice           Start      End  Sectors  Size Type\n/dev/nvme0n1p1    2048  1026047  1024000  500M EFI System\n/dev/nvme0n1p2 1026048  9414655  8388608    4G Linux swap\n/dev/nvme0n1p3 9414656 83884031 74469376 35.5G Linux filesystem\n# 分别格式化\n# 格式化EFI启动分区为fat32格式\nmkfs.fat -F32 /dev/nvme0n1p1\n# 格式化根目录为xfs文件系统\nmkfs.xfs -f /dev/nvme0n1p3\n# 格式化swap文件系统\nmkswap /dev/nvme0n1p2\nswapon /dev/nvme0n1p2\n# 挂载\n# 挂载根分区到mnt\nmount /dev/nvme0n1p3 /mnt\n# 新建EFI分区并挂载\nmkdir -p /mnt/boot/EFI\nmount /dev/nvme0n1p1 /mnt/boot/EFI<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h1>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\"># 使用下面命令下载并安装系统\npacstrap -i /mnt base base-devel vim linux linux-firmware\n# 生成 fstab 文件并检查\ngenfstab -U /mnt &gt;&gt; /mnt/etc/fstab\ncat /mnt/etc/fstab\n# 切换系统目录\narch-chroot /mnt\n# 更改时区，设置UTC\nln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nhwclock --systohc --utc\n# 更改local并生成locale信息\nvim /etc/locale.gen\n# 找到合适的地区去掉前面的#\nlocale-gen\n# 将语言信息写入locale.conf\necho LANG=en_GB.UTF-8 &gt; /etc/locale.conf\n# 配置网络\nvim /etc/hostname\n----\narchlinux\n# 直接写入自己的主机名\nvim /etc/hosts\n----\n127.0.0.1   localhost\n::1         localhost\n127.0.1.1   archlinux.localdomain archlinux\n# archlinux就是自己的主机名\n# 安装相关包\npacman -S grub efibootmgr efivar networkmanager intel-ucode\n# 配置grub\ngrub-install /dev/sda\ngrub-mkconfig -o /boot/grub/grub.cfg\n# 激活并启用NetworkManager\nsystemctl enable NetworkManager\n# 更改密码\npasswd\n# 卸载挂载，重启\nexit\numount /mnt/boot/EFI\numount /mnt\nreboot <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"安装后\"><a class=\"markdownIt-Anchor\" href=\"#安装后\">#</a> 安装后</h1>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># 配置网络，再次联网\n# 输入nmtui 选择 “Activate a connection” 回车进入，选择你需要的网络，连接后back返回即可\n# 安装 openssh\npacman -S openssh\nsystemctl enable sshd\nsystemctl start sshd\nsystemctl status sshd\n# 查看ip\nip -brief address / addr\n# 修改ssh配置允许root连接\nvim /etc/ssh/sshd_config\n----\n# 将下列的语句值改为yes\nPermitRootLogin yes\n# 重启ssh\nsystemctl restart sshd\n# 使用ssh连接\nssh -o StrictHostKeyChecking=no root@192.168.204.130\n# 更新\npacman -Syu\nuseradd axro\nvi /etc/passwd\n---<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"优化终端\"><a class=\"markdownIt-Anchor\" href=\"#优化终端\">#</a> 优化终端</h1>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\"># 安装zsh，高亮，补全\nsudo pacman -S zsh\nsudo pacman -S zsh-autosuggestions\nsudo pacman -S zsh-syntax-highlighting\n# 安装git\nsudo pacman -S git\n# 使用以下命令配置zsh\nautoload -Uz zsh-newuser-install\nzsh-newuser-install -f\n# 查看是否生成.zshrc\nls -a\n# 安装oh my zsh\nsh -c \"$(curl -fsSL https:#raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n# 在.zshrc中加入以下插件\nvim .zshrc\n---\nZSH_THEME=\"dieter\"\nalias vi=vim\nalias ll='ls -l'\nsource /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\nsource /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh\n:wq\n# 刷新终端\nsource .zshrc\n# 安装neofetch\nsudo pacman -S neofetch\n---\n11:18:08 axro@axro-arch ~ neofetch\n                   -`                    axro@axro-arch\n                  .o+`                   --------------\n                 `ooo/                   OS: Arch Linux x86_64\n                `+oooo:                  Host: VMware20,1 None\n               `+oooooo:                 Kernel: 6.2.2-arch1-1\n               -+oooooo+:                Uptime: 20 mins\n             `/:-:++oooo+:               Packages: 182 (pacman)\n            `/++++/+++++++:              Shell: zsh 5.9\n           `/++++++++++++++:             Resolution: 1280x800\n          `/+++ooooooooooooo/`           Terminal: /dev/pts/0\n         ./ooosssso++osssssso+`          CPU: 11th Gen Intel i7-11800H (1) @ 2.304GHz\n        .oossssso-````/ossssss+`         GPU: 00:0f.0 VMware SVGA II Adapter\n       -osssssso.      :ssssssso.        Memory: 209MiB / 3883MiB\n      :osssssss/        osssso+++.\n     /ossssssss/        +ssssooo/-\n   `/ossssso+/:-        -:/+osssso+-\n  `+sso+:-`                 `.-/+oso:\n `++:.                           `-/+/\n .`                                 `/\n\n11:21:14 axro@axro-arch ~<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"安装桌面环境\"><a class=\"markdownIt-Anchor\" href=\"#安装桌面环境\">#</a> 安装桌面环境</h1>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\"># 安装xorg-server，xorg-xinit\nsudo pacman -S xorg-server xorg-xinit\n# 安装显卡驱动\nsudo pacman -S xf86-video-vesa # 这里使用的是vmware，请自行找适合自己机器的显卡驱动\n# 安装plasma\nsudo pacman -S pacman-meta konsole dolphin\nsudo pacman -S kde-applications-meta sddm\n# 启动kde plasma\nsudo systemctl start sddm.service\n# 安装字体，更改中文\nsudo pacman -S noto-fonts-cjk wqy-microhei\n# 安装火狐浏览器\nsudo pacman -S firefox\n# 使用如下命令打开和关闭网卡\nifconfig ens160 down/up<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"vmware安装vmwaretools-实现窗口分辨率自适应\"><a class=\"markdownIt-Anchor\" href=\"#vmware安装vmwaretools-实现窗口分辨率自适应\">#</a> vmware 安装 vmwaretools 实现窗口分辨率自适应。</h2>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\"># 安装\nsudo pacman -Sy gtkmm gtkmm3 net-tools open-vm-tools xf86-video-vmware xf86-input-vmmouse\nsudo systemctl enable vmtoolsd.service\nsudo systemctl enable vmware-vmblock-fuse.service\nsudo reboot<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"详细请参考\"><a class=\"markdownIt-Anchor\" href=\"#详细请参考\">#</a> 详细请参考</h3>\n<p><a href=\"https://wiki.archlinuxcn.org/wiki/VMware/%E5%AE%89%E8%A3%85_Arch_Linux_%E4%B8%BA%E8%99%9A%E6%8B%9F%E6%9C%BA\">wiki.archlinuxcn.org</a><br>\n 这里不多赘述。</p>\n<h2 id=\"安装中文输入法\"><a class=\"markdownIt-Anchor\" href=\"#安装中文输入法\">#</a> 安装中文输入法</h2>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\">// 安装fcitx5\nsudo pacman -S fcitx5-im fcitx5-chinese-addons  fcitx5-rime fcitx5-configtool\n// 编辑配置文件\nvi /etc/environment\n---\nGTK_IM_MODULE=fcitx\nQT_IM_MODULE=fcitx\nXMODIFIERS=@im=fcitx\nSDL_IM_MODULE=fcitx\n\n// 重启，gnome和kde会自动配置\nreboot<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"安装yay工具并安装linuxqq\"><a class=\"markdownIt-Anchor\" href=\"#安装yay工具并安装linuxqq\">#</a> 安装 yay 工具并安装 linuxqq</h2>\n<pre class=\"line-numbers language-zsh\" data-language=\"zsh\"><code class=\"language-zsh\">git clone https://aur.archlinux.org/yay.git\ncd yay\nmakepkg -si\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"编写rclocal\"><a class=\"markdownIt-Anchor\" href=\"#编写rclocal\">#</a> 编写 rc.local</h2>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">vi /usr/lib/systemd/system/rc-local.service\n---\n#/usr/lib/systemd/system/rc-local.service\n[Unit]\nDescription=\"写下描述\" \n\n[Service]\nType=forking\nExecStart=/etc/rc.local start #在这里你可以看到开机执行脚本的位置\nTimeoutSec=0\nStandardInput=tty\nRemainAfterExit=yes\nSysVStartPriority=99\n\n[Install]\nWantedBy=multi-user.target\n\nvi /etc/rc.local\n---\n#/bin/bash\nsudo pacman -Syu\nexit 0\n\nchmod 777 /etc/rc.local\nsystemctl enable rc.local.service<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>",
            "tags": [
                "linux",
                "arch",
                "pacman"
            ]
        }
    ]
}