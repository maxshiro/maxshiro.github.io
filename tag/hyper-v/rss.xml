<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>MAXshiro • Posts by &#34;hyper-v&#34; tag</title>
        <link>http://maxshiroi.top</link>
        <description>Discover and Record the world.</description>
        <language>zh-CN</language>
        <pubDate>Sat, 19 Nov 2022 08:29:13 +0800</pubDate>
        <lastBuildDate>Sat, 19 Nov 2022 08:29:13 +0800</lastBuildDate>
        <category>nextcloud</category>
        <category>聊天室</category>
        <category>python</category>
        <category>ctf</category>
        <category>buuctf</category>
        <category>antsword</category>
        <category>linux</category>
        <category>centos</category>
        <category>web</category>
        <category>nginx</category>
        <category>mysql</category>
        <category>security</category>
        <category>webshell</category>
        <category>wsa</category>
        <category>vhd</category>
        <category>vhdx</category>
        <category>diskpart</category>
        <category>arch</category>
        <category>pacman</category>
        <category>network</category>
        <category>vmware</category>
        <category>win</category>
        <category>explorer.exe</category>
        <category>autorefresh</category>
        <category>docker</category>
        <category>nessus</category>
        <category>awvs</category>
        <category>kali</category>
        <category>dvwa</category>
        <category>fedora</category>
        <category>helloworld</category>
        <category>plugin</category>
        <category>hexo</category>
        <category>backup</category>
        <category>guide</category>
        <category>java</category>
        <category>filestream</category>
        <category>目录</category>
        <category>指令</category>
        <category>权限</category>
        <category>media center</category>
        <category>plex</category>
        <category>emby</category>
        <category>jellyfin</category>
        <category>视频</category>
        <category>音乐</category>
        <category>应急响应</category>
        <category>hvv</category>
        <category>tools</category>
        <category>busybox</category>
        <category>ps</category>
        <category>运维</category>
        <category>smb</category>
        <category>passwd</category>
        <category>switch</category>
        <category>animal crossing</category>
        <category>Project Diva</category>
        <category>Miku</category>
        <category>Mega39</category>
        <category>emulater</category>
        <category>yuzu</category>
        <category>ryujinx</category>
        <category>树莓派</category>
        <category>openwrt</category>
        <category>router</category>
        <category>pic</category>
        <category>img</category>
        <category>api</category>
        <category>random</category>
        <category>wallpaper</category>
        <category>Vocal</category>
        <category>AI</category>
        <category>歌声合成</category>
        <category>transmission</category>
        <category>torrent</category>
        <category>下载器</category>
        <category>nas</category>
        <category>ubuntu</category>
        <category>mariadb</category>
        <category>bug</category>
        <category>win7</category>
        <category>capacity</category>
        <category>shrink</category>
        <category>windows</category>
        <category>Android</category>
        <category>Hyper-V</category>
        <category>WSA</category>
        <category>wsl2</category>
        <category>Hyper-v</category>
        <category>wsl</category>
        <category>权限不足</category>
        <category>vscode</category>
        <item>
            <guid isPermalink="true">http://maxshiroi.top/ug/082913/</guid>
            <title>WSL2迁移以及空间回收。</title>
            <link>http://maxshiroi.top/ug/082913/</link>
            <category>linux</category>
            <category>wsl2</category>
            <category>Hyper-v</category>
            <pubDate>Sat, 19 Nov 2022 08:29:13 +0800</pubDate>
            <description><![CDATA[ &lt;div class=&#34;tag-plugin image&#34;&gt;&lt;div class=&#34;image-bg&#34;&gt;&lt;img src=&#34;../img/wsl2move/20221119083153.png&#34; fancybox=&#34;true&#34;&gt;&lt;/div&gt;&lt;/div&gt;  
&lt;h1 id=&#34;intro&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#intro&#34;&gt;#&lt;/a&gt; Intro&lt;/h1&gt;
&lt;p&gt;如果你按照正常方式在设置里移动 wsl 的话就会发现报错，本篇文章向您介绍如何正确迁移以及回收空间。&lt;/p&gt;
&lt;h1 id=&#34;移动&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#移动&#34;&gt;#&lt;/a&gt; 移动&lt;/h1&gt;
&lt;p&gt;在 Windows 的 PowerShell 中输入:&lt;/p&gt;
&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wsl --&lt;span class=&#34;built_in&#34;&gt;help&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以看到关于这个命令的使用帮助说明：&lt;/p&gt;
&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;用法: wsl.exe [参数] [选项...] [命令行]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;用于运行 Linux 二进制文件的参数:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    如果未提供命令行，wsl.exe 将启动默认的 shell。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --exec, -e &amp;lt;命令行&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        执行指定的命令而不使用默认的 Linux shell。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        按原样传递剩余的命令行。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;选项:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --distribution, -d &amp;lt;分发版&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        运行指定的分发。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --user, -u &amp;lt;用户名&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        以指定用户身份运行。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;用于管理适用于 Linux 的 Windows 子系统的参数:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --export &amp;lt;分发版&amp;gt; &amp;lt;文件名&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        将分发导出到 tar 文件。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        对于标准输出，文件名可以是 -。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --import &amp;lt;分发版&amp;gt; &amp;lt;安装位置&amp;gt; &amp;lt;文件名&amp;gt; [选项]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        将指定的 tar 文件作为新分发进行导入。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        对于标准输入，文件名可以是 -。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        选项:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            --version &amp;lt;版本&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                指定用于新分发的版本。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --list, -l [选项]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        列出分发。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        选项:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            --all&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                列出所有分发，包括当前正在&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                安装或卸载的分发。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            --running&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                只列出当前正在运行的分发。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            --quiet, -q&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                只显示分发名称。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            --verbose, -v&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                显示有关所有分发的详细信息。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --&lt;span class=&#34;built_in&#34;&gt;set&lt;/span&gt;-default, -s &amp;lt;分发版&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        将分发设置为默认值。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --&lt;span class=&#34;built_in&#34;&gt;set&lt;/span&gt;-default-version &amp;lt;版本&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        更改新分发的默认安装版本。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --&lt;span class=&#34;built_in&#34;&gt;set&lt;/span&gt;-version &amp;lt;分发版&amp;gt; &amp;lt;版本&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        更改指定分发的版本。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --shutdown&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        立即终止所有正在运行的分发和 WSL &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt; 轻型工具虚拟机。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --terminate, -t &amp;lt;分发版&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        终止指定的分发。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --unregister &amp;lt;分发版&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        注销分发。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    --&lt;span class=&#34;built_in&#34;&gt;help&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        显示用法信息。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这里我们使用到 export 、unregister 和 import 几个选项就可以实现迁移。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;终止正在运行的分发或虚拟机：&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wsl --shutdown&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;查看已安装的 wsl 名称：&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wsl.exe --list --all&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;适用于 Linux 的 Windows 子系统分发:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Debian (默认)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;kali-linux&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Ubuntu&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;对需要迁移的分发或虚拟机导出（我要迁移 kali-linux）：&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wsl --export kali-linux D:\kali&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;卸载分发版或虚拟机（如果是要重装系统或换机器安装，这一步可以省略，但是要将上一步导出的文件保存好）&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wsl --unregister kali-linux&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;导入新的分发版或虚拟机：&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wsl --import kali-linux D:\wsl\kali D:\kali&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;压缩&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#压缩&#34;&gt;#&lt;/a&gt; 压缩&lt;/h1&gt;
&lt;p&gt;等待导入后你会发现移动的其实是 vhdx 文件，那么就可以对这个文件进行回收空间。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;以管理员身份运行 cmd，输入 diskpart 命令按回车。&lt;/li&gt;
&lt;li&gt;使用以下命令选择你的 userdata.vhdx&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;select vdisk file = &#34;D:\wsl\ext4.vhdx&#34;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果提示&lt;/p&gt;
&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;DiskPart successfully selected the virtual disk file.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;就说明成功了。&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;输入  &lt;code&gt;compact vdisk&lt;/code&gt;  来压缩。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;bug&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#bug&#34;&gt;#&lt;/a&gt; bug&lt;/h1&gt;
&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;ERROR: &lt;span class=&#34;title&#34;&gt;Wsl&lt;/span&gt;/&lt;span class=&#34;title&#34;&gt;Service&lt;/span&gt;/&lt;span class=&#34;title&#34;&gt;CreateInstance&lt;/span&gt;/&lt;span class=&#34;title&#34;&gt;ERROR_FILE_NOT_FOUND&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打开命令行，在命令行中输入&lt;/p&gt;
&lt;figure class=&#34;highlight cmd&#34;&gt;&lt;figcaption&gt;&lt;span&gt;cmd&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wsl.exe --list --all&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wsl.exe --unregister xxx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&#34;摘抄&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#摘抄&#34;&gt;#&lt;/a&gt; 摘抄&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/zhys2007/article/details/110958577&#34;&gt;WSL2 迁移方法&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://blog.csdn.net/y17854117512/article/details/119214442?spm=1001.2101.3001.6661.1&amp;amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-119214442-blog-110900591.pc_relevant_default&amp;amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-119214442-blog-110900591.pc_relevant_default&amp;amp;utm_relevant_index=1&#34;&gt;解决 Win10 子系统的 Ubuntu 被删除后，重新安装出现找不到系统路径&lt;/a&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://maxshiroi.top/ug/205944/</guid>
            <title>Win11 安装 WSA 简易教程</title>
            <link>http://maxshiroi.top/ug/205944/</link>
            <category>Android</category>
            <category>Hyper-V</category>
            <category>WSA</category>
            <pubDate>Sun, 28 Aug 2022 20:59:44 +0800</pubDate>
            <description><![CDATA[ &lt;blockquote&gt;
&lt;p&gt;微软终于在昨天上线了 WSA 的测试版本，此次只有美国地区上线了。因此如果你的 Win11 系统为美区的话，可以直接点击 &lt;a href=&#34;https://www.microsoft.com/store/productId/9P3395VX91NR&#34; title=&#34;这个链接&#34;&gt;这个链接&lt;/a&gt; 进行安装。如果非美区那就接着看步骤吧&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;bug 还是有很多，首先是 WSA 无法调用 GPU, 这就导致很多 3d 游戏会很卡，实测明日方舟帧数不到 20 帧。然后安装 WSA 要启用 Hyper-V 即微软的虚拟机平台，打开这个会导致无法再安装和使用其他安卓模拟器。和市面上大多数安卓模拟器相比，微软这个 WSA 是 ARM 翻译运行的，安卓版本更高 (Android 11), 可以运行 ARM 程序。与系统集成度更好 (虽然目前还没有实现 WSL 那样的文件访问) 而模拟器大多都为 Android x86 项目改的，因此最高只能到 Android 9.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;如果你是想尝尝鲜，试试这个新功能那我还是推荐试一试。如果你主要想拿来打游戏，日常使用的话那还是更推荐安卓模拟器一些.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;开启虚拟化&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#开启虚拟化&#34;&gt;#&lt;/a&gt; 开启虚拟化&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;PS: 如果之前你有禁用过 Hyper-V 的话记得使用管理员权限打开 Powershell 然后通过这个指令这个指令重新打开，不记得有没有那就跳过:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;bcdedit /set hypervisorlaunchtype auto&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;打开开始菜单，直接搜索控制面板，然后打开.&lt;/li&gt;
&lt;li&gt;找到  &lt;code&gt;程序和功能&lt;/code&gt;  - &lt;code&gt;启用或关闭 Windows 功能&lt;/code&gt;  并点击打开，会弹出一个窗口.&lt;/li&gt;
&lt;li&gt;在弹出窗口里面勾选  &lt;code&gt;Hyper-V&lt;/code&gt; 、 &lt;code&gt;Windows 虚拟机监控程序平台&lt;/code&gt; 、 &lt;code&gt;适用于 Linux 的 Windows 子系统&lt;/code&gt; 、 &lt;code&gt;虚拟机平台&lt;/code&gt;  这几项，然后点击确定。系统会自动查找更新并安装.&lt;/li&gt;
&lt;li&gt;等待重启过后就可以进行下一步了.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;安装本体&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装本体&#34;&gt;#&lt;/a&gt; 安装本体&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;首先复制上面那个链接.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://store.rg-adguard.net/&#34; title=&#34;安装包抓包&#34;&gt;安装包抓包&lt;/a&gt;，点开这个网址，将第一步复制的链接粘贴到搜索框，右边选择  &lt;code&gt;slow&lt;/code&gt;  然后点对勾.&lt;/li&gt;
&lt;li&gt;找到最下面名为  &lt;code&gt;MicrosoftCorporationII.WindowsSubsystemForAndroid_1.7.32815.0_neutral_~_8wekyb3d8bbwe.msixbundle&lt;/code&gt;  的一项，注意大小为  &lt;code&gt;1.21GB&lt;/code&gt;  , 直接点击进行一个下载.&lt;/li&gt;
&lt;li&gt;找到你下载的文件，然后右键  &lt;code&gt;开始按钮&lt;/code&gt;  选择  &lt;code&gt;Windows 终端 (管理员)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;然后会打开 Powershell 窗口，在里面输入指令&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;add-appxpackage &lt;span class=&#34;string&#34;&gt;&#34;你下载文件的完整路径&#34;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# example&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;add-appxpackage &lt;span class=&#34;string&#34;&gt;&#34;D:\download\MicrosoftCorporationII.WindowsSubsystemForAndroid_1.7.32815.0_neutral_~_8wekyb3d8bbwe.msixbundle&#34;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;等他跑完以后就会在开始菜单里出现  &lt;code&gt;Windows Subsystem for Android™&lt;/code&gt;  点击打开是下面这个界面就说明安装成功了.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;tag-plugin image&#34;&gt;&lt;div class=&#34;image-bg&#34;&gt;&lt;img src=&#34;/img/wsa/20220920220234.png&#34; fancybox=&#34;true&#34;&gt;&lt;/div&gt;&lt;/div&gt;  
&lt;h1 id=&#34;安装apk&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#安装apk&#34;&gt;#&lt;/a&gt; 安装 apk&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;点击文件后面的按钮会自动启动 WSA, 等打开后下面的 ip 地址会刷新。此时我们将开发人员模式打开.&lt;/li&gt;
&lt;li&gt;安装 ADB, 下载 &lt;a href=&#34;https://nas.axro.top/index.php/s/frYxCHg7FfabNEY&#34; title=&#34;这个文件&#34;&gt;这个文件&lt;/a&gt; 然后解压到任意目录，然后打开解压出来的文件夹，名称为  &lt;code&gt;platform-tools&lt;/code&gt; .&lt;/li&gt;
&lt;li&gt;按住 &lt;code&gt;Shift&lt;/code&gt;  键右击文件夹的空白处，选择 &lt;code&gt;显示更多选项&lt;/code&gt;  - &lt;code&gt;在此处打开 Powershell 窗口(s)&lt;/code&gt; , 然后在打开的窗口内依次输入以下指令:&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;adb connect 127.0.0.1:58526 &lt;span class=&#34;comment&#34;&gt;#这个 127.0.0.1:58526 为你的开发人员选项那一栏里显示的地址.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 第一次可能会失败, 再输入一次就可以了.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;adb install -r xxx.apk&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 这个指令为安装 apk, 将 xxx 替换为你要安装的 apk 文件名称.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;显示安装完成就会出现在你的开始菜单里，然后直接点击进行一个打开.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;qa&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#qa&#34;&gt;#&lt;/a&gt; Q&amp;amp;A&lt;/h1&gt;
 ]]></description>
        </item>
    </channel>
</rss>
