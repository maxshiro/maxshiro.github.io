{
    "version": "https://jsonfeed.org/version/1",
    "title": "MAXshiro • All posts by \"wsa\" tag",
    "description": "Discover and Record the world.",
    "home_page_url": "http://maxshiroi.top",
    "items": [
        {
            "id": "http://maxshiroi.top/ug/204350/",
            "url": "http://maxshiroi.top/ug/204350/",
            "title": "通过diskpart工具压缩userdata.vhdx来解决磁盘占用过多问题",
            "date_published": "2022-11-18T12:43:50.000Z",
            "content_html": "<h1 id=\"intro\"><a class=\"anchor\" href=\"#intro\">#</a> Intro</h1>\n<p>当你安装了 WSA 后随着你的使用，你会发现占用的空间越来越大。即使你把不需要的安卓程序卸载了之后，却依然满满的霸占着你的 C 盘。你只能眼睁睁地看他慢慢变大却无能为力。当然本篇文章的目的就是帮你解决这个问题。</p>\n<h1 id=\"移动wsa到其他盘符\"><a class=\"anchor\" href=\"#移动wsa到其他盘符\">#</a> 移动 WSA 到其他盘符</h1>\n<blockquote>\n<p>你利用你聪明的头脑打开了百度并使用灵巧的双手在搜索框里输入 WSA 磁盘空间过大。很快你便看到了一种解决方式.</p>\n</blockquote>\n<ol>\n<li>打开设置 - 程序 - 已安装的程序，找到 WSA</li>\n</ol>\n<div class=\"tag-plugin image\"><div class=\"image-bg\"><img src=\"/img/Windowssubsystemforandroidcompression/20221118205416.png\" fancybox=\"true\"></div></div> \n<ol start=\"2\">\n<li>点击后面三个点选择移动。<br>\n稍等一会就会帮你把 WSA 移动到对应的盘符了。</li>\n</ol>\n<h1 id=\"使用diskpart工具压缩\"><a class=\"anchor\" href=\"#使用diskpart工具压缩\">#</a> 使用 diskpart 工具压缩</h1>\n<ol>\n<li>以管理员身份运行 cmd，输入 diskpart 命令按回车。</li>\n<li>使用以下命令选择你的 userdata.vhdx</li>\n</ol>\n<figure class=\"highlight cmd\"><figcaption><span>cmd</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select vdisk file = \"D:\\WpSystem\\S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">21</span>-<span class=\"number\">3846526574</span>-<span class=\"number\">1502088438</span>-<span class=\"number\">2560978845</span>-<span class=\"number\">1001</span>\\AppData\\Local\\Packages\\MicrosoftCorporationII.WindowsSubsystemForAndroid_8wekyb3d8bbwe\\LocalCache\\userdata.vhdx\"</span><br></pre></td></tr></tbody></table></figure>\n<p>如果提示</p>\n<figure class=\"highlight cmd\"><figcaption><span>cmd</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DiskPart successfully selected the virtual disk file.</span><br></pre></td></tr></tbody></table></figure>\n<p>就说明成功了。</p>\n<ol start=\"3\">\n<li>输入  <code>compact vdisk</code>  来压缩。</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DiskPart has encountered an error: The specified file is encrypted and the user does not have the ability to decrypt it.</span><br><span class=\"line\">See the System Event Log for more information.</span><br></pre></td></tr></tbody></table></figure>\n<p>这个就说明你没有权限压缩这个文件。<br>\n为了解决这个问题我百度了一晚上，最后发现，只要你把这个文件复制走，就会提示</p>\n<div class=\"tag-plugin image\"><div class=\"image-bg\"><img src=\"/img/Windowssubsystemforandroidcompression/20221118210314.png\" fancybox=\"true\"></div></div>  \n<p>这里选择是，然后就会复制走。<br>\n这个时候你再看你复制的文件就会发现上面的小黄锁已经不见了。</p>\n<ol start=\"4\">\n<li>重新选择 userdata.vhdx 文件</li>\n</ol>\n<figure class=\"highlight cmd\"><figcaption><span>cmd</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select vdisk file = \"D:\\userdata.vhdx\"</span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"5\">\n<li>重新输入命令  <code>compact vdisk</code>  进行压缩，如果出现下面的提示那就说明压缩成功了。</li>\n</ol>\n<figure class=\"highlight cmd\"><figcaption><span>cmd</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DISKPART&gt; <span class=\"built_in\">compact</span> vdisk</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">100</span> percent completed</span><br><span class=\"line\"></span><br><span class=\"line\">DiskPart successfully compacted the virtual disk file.</span><br><span class=\"line\"></span><br><span class=\"line\">DISKPART&gt;</span><br></pre></td></tr></tbody></table></figure>\n<p>此时再看你复制出来的文件，就会发现大小缩小了很多，压缩成功了。<br>\n接着只需要剪切拷贝出来的文件，替换掉原来的文件就可以了。</p>\n<h1 id=\"成果\"><a class=\"anchor\" href=\"#成果\">#</a> 成果</h1>\n<p><strong>压缩前：</strong></p>\n<blockquote>\n<div class=\"tag-plugin image\"><div class=\"image-bg\"><img src=\"/img/Windowssubsystemforandroidcompression/20221118204548.png\" fancybox=\"true\"></div></div>  \n</blockquote>\n<p><strong>压缩后：</strong></p>\n<blockquote>\n<div class=\"tag-plugin image\"><div class=\"image-bg\"><img src=\"/img/Windowssubsystemforandroidcompression/20221118210939.png\" fancybox=\"true\"></div></div>  </blockquote>\n",
            "tags": [
                "wsa",
                "vhd",
                "vhdx",
                "diskpart"
            ]
        },
        {
            "id": "http://maxshiroi.top/ug/205944/",
            "url": "http://maxshiroi.top/ug/205944/",
            "title": "Win11 安装 WSA 简易教程",
            "date_published": "2022-08-28T12:59:44.000Z",
            "content_html": "<blockquote>\n<p>微软终于在昨天上线了 WSA 的测试版本，此次只有美国地区上线了。因此如果你的 Win11 系统为美区的话，可以直接点击 <a href=\"https://www.microsoft.com/store/productId/9P3395VX91NR\" title=\"这个链接\">这个链接</a> 进行安装。如果非美区那就接着看步骤吧</p>\n</blockquote>\n<blockquote>\n<p>bug 还是有很多，首先是 WSA 无法调用 GPU, 这就导致很多 3d 游戏会很卡，实测明日方舟帧数不到 20 帧。然后安装 WSA 要启用 Hyper-V 即微软的虚拟机平台，打开这个会导致无法再安装和使用其他安卓模拟器。和市面上大多数安卓模拟器相比，微软这个 WSA 是 ARM 翻译运行的，安卓版本更高 (Android 11), 可以运行 ARM 程序。与系统集成度更好 (虽然目前还没有实现 WSL 那样的文件访问) 而模拟器大多都为 Android x86 项目改的，因此最高只能到 Android 9.</p>\n</blockquote>\n<blockquote>\n<p>如果你是想尝尝鲜，试试这个新功能那我还是推荐试一试。如果你主要想拿来打游戏，日常使用的话那还是更推荐安卓模拟器一些.</p>\n</blockquote>\n<h1 id=\"开启虚拟化\"><a class=\"anchor\" href=\"#开启虚拟化\">#</a> 开启虚拟化</h1>\n<blockquote>\n<p>PS: 如果之前你有禁用过 Hyper-V 的话记得使用管理员权限打开 Powershell 然后通过这个指令这个指令重新打开，不记得有没有那就跳过:</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bcdedit /set hypervisorlaunchtype auto</span><br></pre></td></tr></tbody></table></figure>\n<ol>\n<li>打开开始菜单，直接搜索控制面板，然后打开.</li>\n<li>找到  <code>程序和功能</code>  - <code>启用或关闭 Windows 功能</code>  并点击打开，会弹出一个窗口.</li>\n<li>在弹出窗口里面勾选  <code>Hyper-V</code> 、 <code>Windows 虚拟机监控程序平台</code> 、 <code>适用于 Linux 的 Windows 子系统</code> 、 <code>虚拟机平台</code>  这几项，然后点击确定。系统会自动查找更新并安装.</li>\n<li>等待重启过后就可以进行下一步了.</li>\n</ol>\n<h1 id=\"安装本体\"><a class=\"anchor\" href=\"#安装本体\">#</a> 安装本体</h1>\n<ol>\n<li>首先复制上面那个链接.</li>\n<li><a href=\"https://store.rg-adguard.net/\" title=\"安装包抓包\">安装包抓包</a>，点开这个网址，将第一步复制的链接粘贴到搜索框，右边选择  <code>slow</code>  然后点对勾.</li>\n<li>找到最下面名为  <code>MicrosoftCorporationII.WindowsSubsystemForAndroid_1.7.32815.0_neutral_~_8wekyb3d8bbwe.msixbundle</code>  的一项，注意大小为  <code>1.21GB</code>  , 直接点击进行一个下载.</li>\n<li>找到你下载的文件，然后右键  <code>开始按钮</code>  选择  <code>Windows 终端 (管理员)</code></li>\n<li>然后会打开 Powershell 窗口，在里面输入指令</li>\n</ol>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add-appxpackage <span class=\"string\">\"你下载文件的完整路径\"</span> </span><br><span class=\"line\"><span class=\"comment\"># example</span></span><br><span class=\"line\">add-appxpackage <span class=\"string\">\"D:\\download\\MicrosoftCorporationII.WindowsSubsystemForAndroid_1.7.32815.0_neutral_~_8wekyb3d8bbwe.msixbundle\"</span></span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"6\">\n<li>等他跑完以后就会在开始菜单里出现  <code>Windows Subsystem for Android™</code>  点击打开是下面这个界面就说明安装成功了.</li>\n</ol>\n<div class=\"tag-plugin image\"><div class=\"image-bg\"><img src=\"/img/wsa/20220920220234.png\" fancybox=\"true\"></div></div>  \n<h1 id=\"安装apk\"><a class=\"anchor\" href=\"#安装apk\">#</a> 安装 apk</h1>\n<ol>\n<li>点击文件后面的按钮会自动启动 WSA, 等打开后下面的 ip 地址会刷新。此时我们将开发人员模式打开.</li>\n<li>安装 ADB, 下载 <a href=\"https://nas.axro.top/index.php/s/frYxCHg7FfabNEY\" title=\"这个文件\">这个文件</a> 然后解压到任意目录，然后打开解压出来的文件夹，名称为  <code>platform-tools</code> .</li>\n<li>按住 <code>Shift</code>  键右击文件夹的空白处，选择 <code>显示更多选项</code>  - <code>在此处打开 Powershell 窗口(s)</code> , 然后在打开的窗口内依次输入以下指令:</li>\n</ol>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">adb connect 127.0.0.1:58526 <span class=\"comment\">#这个 127.0.0.1:58526 为你的开发人员选项那一栏里显示的地址.</span></span><br><span class=\"line\"><span class=\"comment\"># 第一次可能会失败, 再输入一次就可以了.</span></span><br><span class=\"line\">adb install -r xxx.apk</span><br><span class=\"line\"><span class=\"comment\"># 这个指令为安装 apk, 将 xxx 替换为你要安装的 apk 文件名称.</span></span><br></pre></td></tr></tbody></table></figure>\n<ol start=\"4\">\n<li>显示安装完成就会出现在你的开始菜单里，然后直接点击进行一个打开.</li>\n</ol>\n<h1 id=\"qa\"><a class=\"anchor\" href=\"#qa\">#</a> Q&amp;A</h1>\n",
            "tags": [
                "Android",
                "Hyper-V",
                "WSA"
            ]
        }
    ]
}