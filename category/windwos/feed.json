{
    "version": "https://jsonfeed.org/version/1",
    "title": "MAXshiro • All posts by \"windwos\" category",
    "description": "Discover and Record the world.",
    "home_page_url": "http://maxshiroi.top",
    "items": [
        {
            "id": "http://maxshiroi.top/Windwos/103802/",
            "url": "http://maxshiroi.top/Windwos/103802/",
            "title": "使用Windows内置的沙盒功能来隔离常见的国产软件",
            "date_published": "2023-07-25T02:38:02.000Z",
            "content_html": "<h1 id=\"使用本项目的目的\"><a class=\"anchor\" href=\"#使用本项目的目的\">#</a> 使用本项目的目的</h1>\n<div class=\"tag-plugin image\"><div class=\"image-bg\"><img src=\"/img/windowssandboxfortencent/2023-07-25-11-05-29.png\" fancybox=\"true\"></div></div>\n<p>腾讯系的软件众所周知在使用中会有个进程随着主进程的启动一同启动。这个程序会读取本地的浏览器浏览记录以及一些其他的个人隐私信息并上传到腾讯那边进行分析。具体他拿来做什么并不是很清楚，但是有一些猜测：</p>\n<ol>\n<li>反作弊相关</li>\n<li>精确探测用户画像实现精准推送</li>\n<li>与政府联合进行某些行动。</li>\n</ol>\n<p>这些年大火一直在搞如何才能防止腾讯系软件对用户信息的收集。目前的方案有如下几种：</p>\n<ol>\n<li>使用 VMware/vbox 之类的虚拟机软件来安置这些毒瘤，缺点：占用空间和性能都很多，而且启动很麻烦。</li>\n<li>使用 sandboxie 这类沙箱软件，缺点：没有 plus 版本会缺失很多功能。</li>\n<li>使用另外的机器来安置这些软件，缺点：并不是所有人都那么 rich。</li>\n<li>使用 windows 沙盒：</li>\n</ol>\n<p>windows 沙盒在正常使用的时候和普通机器并无太大区别，但是当你关闭 windows 沙盒之后里面的内容也会随之消失。</p>\n<p>因此本项目的目的就是提供一种新的解决方案，在本地创建一个文件夹用来保存 windows 沙盒产生的一些文件，从而可以不用每次启动都需要重新安装这些软件。但并不能照顾到所有的文件，所以还是会有一些缺陷。</p>\n<h1 id=\"注意\"><a class=\"anchor\" href=\"#注意\">#</a> 注意</h1>\n<p><strong>本项目由 <code>empty-233/tencent-sandbox</code>  克隆而来，为自己方便使用。</strong></p>\n<h1 id=\"tencent-sandbox\"><a class=\"anchor\" href=\"#tencent-sandbox\">#</a> tencent-sandbox</h1>\n<p>tencent-sandbox 是使用 <a href=\"https://learn.microsoft.com/zh-cn/windows/security/application-security/application-isolation/windows-sandbox/windows-sandbox-overview\">Windows sandbox</a> 为腾讯全家桶创建沙盒的配置</p>\n<h1 id=\"chinaflavor-sandbox\"><a class=\"anchor\" href=\"#chinaflavor-sandbox\">#</a> Chinaflavor-sandbox</h1>\n<p><a href=\"https://github.com/maxshiro/Chinaflavor-sandbox\">Chinaflavor-sandbox</a> 是由 <code>tencent-sandbox</code>  个人定制而来，添加了腾讯文档，腾讯会议以及钉钉。</p>\n<h2 id=\"注意事项\"><a class=\"anchor\" href=\"#注意事项\">#</a> 注意事项</h2>\n<p><strong>Windows 10 不支持相对路径</strong>，请把 <strong>Tencent.wsb</strong> 中的路径替换成<strong>绝对路径</strong></p>\n<h2 id=\"兼容性\"><a class=\"anchor\" href=\"#兼容性\">#</a> 兼容性</h2>\n<p>目前测试 <strong>微信</strong> <strong>QQ</strong> <strong>QQNT</strong> <strong>TIM</strong> <strong>企业微信</strong> 正常使用，其他未测试</p>\n<p>注: <strong>企业微信无法自动登录 (检查设备)，只能每次重新登录</strong></p>\n<p>默认分配<strong> 2gb</strong> 内存，有需要可以自行修改  <code>&lt;MemoryInMB&gt;2048&lt;/MemoryInMB&gt;</code></p>\n<h2 id=\"使用教程\"><a class=\"anchor\" href=\"#使用教程\">#</a> 使用教程</h2>\n<h3 id=\"如何启用windows沙盒\"><a class=\"anchor\" href=\"#如何启用windows沙盒\">#</a> 如何启用 windows 沙盒？</h3>\n<p><strong>注意：请确保您的 Windows 系统在 Win10 以上，以及 Windows 沙盒功能不适用于 Windows 10/11 家庭版。您可以使用 <code>winver</code>  命令来检查系统版本。</strong></p>\n<ol>\n<li>按下 <code>Win + R</code>  键，打开 “运行” 对话框，然后输入 <code>control</code>  并按 <code>Enter</code>  键，这将打开控制面板。</li>\n<li>在控制面板中，将查看到若干个选项类别。请找到并点击 “程序” 菜单。</li>\n<li>在 “程序” 菜单下，您将看到一个名为 “启用或关闭 Windows 功能” 的链接。请点击它，这将打开一个名为 “Windows 功能” 的窗口。</li>\n<li>在 “Windows 功能” 窗口中，您将看到一个列表，其中包含了可启用或禁用的 Windows 功能。请在列表中找到 “Windows 沙盒” 选项，并确保其复选框被勾选上。</li>\n<li>在勾选了 “Windows 沙盒” 选项后，点击 “确定” 按钮。Windows 将开始应用更改，这可能需要一些时间。完成后，您将看到一个提示，要求您重启计算机，以使更改生效。请点击 “是”，让系统重启。</li>\n<li>当您的计算机重新启动后，按下 <code>Win + S</code>  键，打开 Windows 搜索功能。在搜索栏中输入 “Windows 沙盒”，然后点击出现的 “Windows 沙盒” 应用程序。</li>\n<li>点击 “Windows 沙盒” 应用程序后，Windows 沙盒将开始初始化。稍等片刻，您将看到一个新的桌面环境弹出，类似于一个干净的 Windows 桌面。这表示 Windows 沙盒已经成功启动。</li>\n</ol>\n<h3 id=\"clone本项目到任意目录\"><a class=\"anchor\" href=\"#clone本项目到任意目录\">#</a> Clone 本项目到任意目录</h3>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/maxshiro/Chinaflavor-sandbox.git</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"创建空文件夹目录结构\"><a class=\"anchor\" href=\"#创建空文件夹目录结构\">#</a> 创建空文件夹目录结构</h3>\n<p>双击根目录中的 <code>mkdir.bat</code>  一键创建以下目录结构。</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">├───App</span><br><span class=\"line\">│   ├───DingDing</span><br><span class=\"line\">│   ├───Docs</span><br><span class=\"line\">│   ├───Meeting</span><br><span class=\"line\">│   ├───QQ</span><br><span class=\"line\">│   ├───QQNT</span><br><span class=\"line\">│   ├───TIM</span><br><span class=\"line\">│   ├───WeChat</span><br><span class=\"line\">│   └───WXWork</span><br><span class=\"line\">├───Data</span><br><span class=\"line\">│   ├───Common Files</span><br><span class=\"line\">│   ├───Documents</span><br><span class=\"line\">│   │   ├───Tencent</span><br><span class=\"line\">│   │   ├───WeChat</span><br><span class=\"line\">│   │   └───WXWork</span><br><span class=\"line\">│   ├───Roaming</span><br><span class=\"line\">│   │   ├───DingTalk</span><br><span class=\"line\">│   │   ├───Tencent</span><br><span class=\"line\">│   │   ├───WeChat</span><br><span class=\"line\">│   │   └───WXWork</span><br><span class=\"line\">│   └───SysWOW64</span><br><span class=\"line\">├───Desktop</span><br><span class=\"line\">└───Scripts</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"安装配置沙盒\"><a class=\"anchor\" href=\"#安装配置沙盒\">#</a> 安装配置沙盒</h3>\n<ol>\n<li>\n<p>在沙盒内正确安装需要的软件，正常安装 <strong>QQ/QQNT/Wechat/Dingtalk</strong>。</p>\n</li>\n<li>\n<p>安装完成之后复制沙盒内的  <code>C:\\Windows\\SysWOW64</code>  目录下所有文件到 Clone 下来的  <code>Data\\SysWOW64</code>  目录内 (不然 qq 运行一段时间后会崩溃)，并关闭沙盒。</p>\n</li>\n<li>\n<p>打开 <strong>Tencent.wsb</strong>，继续安装列出来的软件。</p>\n</li>\n<li>\n<p>移动桌面快捷方式到任何位置，再移动回桌面 (否则快捷方式会消失)。</p>\n</li>\n</ol>\n<p>操作完成后就可以正常使用了，不确保账号数据会保留。</p>\n<h3 id=\"自定义\"><a class=\"anchor\" href=\"#自定义\">#</a> 自定义</h3>\n<p>如果你想要自定义添加的软件，可以参考我提供的思路：</p>\n<ol>\n<li>\n<p>沙盒内正常安装你需要的软件到默认目录下（随便）, 然后复制这个目录的路径。</p>\n</li>\n<li>\n<p>可以到下面的几个目录内看看你装的软件是否创建了其他目录：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:\\Users\\WDAGUtilityAccount\\Documents\\</span><br><span class=\"line\">C:\\Users\\WDAGUtilityAccount\\AppData\\Roaming\\</span><br><span class=\"line\">C:\\Program Files (x86)\\Common Files</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li>\n<p>使用任意文本编辑器打开 <strong>Tencent.wsb</strong> 这个文件就能看到这个沙盒是如何工作的。（大概意思就是把配置过的目录映射到虚拟机里）</p>\n</li>\n<li>\n<p>找到对应的 <code>&lt;!-- Common Files --&gt;</code> , <code>&lt;!-- App --&gt;</code> , <code>&lt;!-- Documents --&gt;</code> , <code>&lt;!-- Common Files --&gt;</code> , <code>&lt;!-- ProgramData --&gt;</code>  注释标签，在对应位是添加你要映射的目录：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 以钉钉为例：</span><br><span class=\"line\">&lt;!-- App --&gt;</span><br><span class=\"line\"># 在这个标签下添加这些内容</span><br><span class=\"line\">&lt;MappedFolder&gt;</span><br><span class=\"line\">\t&lt;HostFolder&gt;.\\App\\DingDing&lt;/HostFolder&gt; # HostFolder 本机位置</span><br><span class=\"line\">\t&lt;SandboxFolder&gt;C:\\Program Files (x86)\\DingDing&lt;/SandboxFolder&gt; # SandboxFolder 沙箱内位置</span><br><span class=\"line\">\t&lt;ReadOnly&gt;false&lt;/ReadOnly&gt; # ReadOnly 是否只读</span><br><span class=\"line\">&lt;/MappedFolder&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- Roaming --&gt;</span><br><span class=\"line\">&lt;MappedFolder&gt;</span><br><span class=\"line\">\t&lt;HostFolder&gt;.\\Data\\Roaming\\DingTalk&lt;/HostFolder&gt;</span><br><span class=\"line\">\t&lt;SandboxFolder&gt;C:\\Users\\WDAGUtilityAccount\\AppData\\Roaming\\DingTalk&lt;/SandboxFolder&gt;</span><br><span class=\"line\">\t&lt;ReadOnly&gt;false&lt;/ReadOnly&gt;</span><br><span class=\"line\">&lt;/MappedFolder&gt;</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li>\n<p>在主机 Data 目录下创建上面 HostFolder 编写的目录位置。</p>\n</li>\n<li>\n<p>关闭虚拟机，重新打开并再次正常安装（注意安装位置要和你自己上面填的目录保持一致），按照第一次的方式再次拷贝快捷方式并恢复。</p>\n</li>\n<li>\n<p>其余的参考文件内的内容自行修改。</p>\n</li>\n</ol>\n<h2 id=\"挂载路径\"><a class=\"anchor\" href=\"#挂载路径\">#</a> 挂载路径</h2>\n<figure class=\"highlight text\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">桌面 -&gt; Desktop</span><br><span class=\"line\">C:\\Program Files (x86)\\Common Files -&gt; Data\\Common Files</span><br><span class=\"line\">C:\\Users\\WDAGUtilityAccount\\Documents\\Tencent Files -&gt; Data\\Documents\\Tencent</span><br><span class=\"line\">C:\\Users\\WDAGUtilityAccount\\Documents\\WeChat Files -&gt; Data\\Documents\\WeChat</span><br><span class=\"line\">C:\\Users\\WDAGUtilityAccount\\Documents\\WXWork -&gt; Data\\Documents\\WXWork</span><br><span class=\"line\"></span><br><span class=\"line\">其余的请查看 Tencent.wsb 中的 MappedFolder</span><br></pre></td></tr></tbody></table></figure>\n",
            "tags": [
                "windows",
                "qq",
                "sandbox",
                "tencent"
            ]
        }
    ]
}